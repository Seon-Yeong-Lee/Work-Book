## 튜닝 내용
```
-> 쿼리수정, 인덱스추가
- 페이징 + FULL COUNT 쿼리 수정
- 기존 147.92" => 3.84"
- totalCount 전체 카운트 제외 한다면 1" 대 결과 도출
```

<hr>

## 인덱스 추가
```
CREATE INDEX HMSADM.HMS_CR_CRDISSU_MST_NU3 ON HMSADM.HMS_CR_CRDISSU_MST(FST_REG_DTM) TABLESPACE HMS_INDEX ;
```

<hr>

## 쿼리수정

### 튜닝 전 SQL
```
SELECT
  CT.CRD_TYP_CD AS crdTypCd,
  CT.CRD_TYP_NM AS crdTypNm,
  HMSADM.HMS_CM_MSK_SF('CARD', CI.CRD_NO, :1 ) AS crdNo,
  CC.COM_CD_NM AS stsCd,
  CI.MBR_ID AS mbrId,
  CT.PREG_PSB_YN AS pregPsbYn,
  CT.ISSU_FR_DT AS issuFrDt,
  CI.CORP_REP_CRD_YN AS corpRepCrdYn,
  CC2.COM_CD_NM AS savUseFgCd,
  CI.ISSU_CNT AS issuCnt,
  CI.ISSU_MCHT_NO AS issuMchtNo,
  MC.MCHT_NM AS issuMchtNm,
  ROW_NUMBER() OVER(ORDER BY CI.FST_REG_DTM DESC, CI.CRD_NO) AS rowSeq,
  count(*) OVER() AS  totalCount
FROM HMS_CR_CRDISSU_MST CI
  LEFT OUTER JOIN HMS_CR_CRDTYP_MST CT ON CI.CRD_TYP_CD = CT.CRD_TYP_CD
  LEFT OUTER JOIN HMS_CM_COMCD_MST CC ON CT.STS_CD = CC.COM_CD AND CC.COM_CD_GRP = 'CRDTPSTAT'
  LEFT OUTER JOIN HMS_CM_COMCD_MST CC2 ON CI.SAV_USE_FG_CD = CC2.COM_CD AND CC2.COM_CD_GRP = 'CRDPNT'
  LEFT OUTER JOIN HMS_MC_MCHT_MST MC ON CI.ISSU_MCHT_NO = MC.MCHT_NO
ORDER BY CI.FST_REG_DTM DESC, CI.CRD_NO
OFFSET :2  ROWS FETCH NEXT :3  ROWS ONLY
```

###  튜닝 후 SQL
```
SELECT
  CT.CRD_TYP_CD AS crdTypCd,
  CT.CRD_TYP_NM AS crdTypNm,
  HMSADM.HMS_CM_MSK_SF('CARD', CI.CRD_NO, :1 ) AS crdNo,
  CC.COM_CD_NM AS stsCd,
  CI.MBR_ID AS mbrId,
  CT.PREG_PSB_YN AS pregPsbYn,
  CT.ISSU_FR_DT AS issuFrDt,
  CI.CORP_REP_CRD_YN AS corpRepCrdYn,
  CC2.COM_CD_NM AS savUseFgCd,
  CI.ISSU_CNT AS issuCnt,
  CI.ISSU_MCHT_NO AS issuMchtNo,
  MC.MCHT_NM AS issuMchtNm,
  CI.ROWSEQ,
  CI.TOTALCOUNT
FROM (
    SELECT
      CI.MBRSH_PGM_ID,
      CI.CRD_NO,
      CI.MBR_ID,
      CI.CORP_REP_CRD_YN,
      CI.ISSU_CNT,
      CI.ISSU_MCHT_NO,
      CI.CRD_TYP_CD,
      CI.SAV_USE_FG_CD,
      ROW_NUMBER() OVER(ORDER BY CI.FST_REG_DTM DESC, CI.CRD_NO) AS rowSeq,
      SUM(1) OVER(ORDER BY CI.FST_REG_DTM) AS totalCount
    FROM HMS_CR_CRDISSU_MST CI
    ORDER BY CI.FST_REG_DTM DESC, CI.CRD_NO
    OFFSET :2  ROWS FETCH NEXT :3  ROWS ONLY
  ) CI
  LEFT OUTER JOIN HMS_CR_CRDTYP_MST CT ON CI.MBRSH_PGM_ID = CT.MBRSH_PGM_ID AND CI.CRD_TYP_CD = CT.CRD_TYP_CD
  LEFT OUTER JOIN HMS_MC_MCHT_MST MC ON CI.MBRSH_PGM_ID = MC.MBRSH_PGM_ID AND CI.ISSU_MCHT_NO = MC.MCHT_NO
  LEFT OUTER JOIN HMS_CM_COMCD_MST CC ON CT.MBRSH_PGM_ID = CC.MBRSH_PGM_ID AND CT.STS_CD = CC.COM_CD AND CC.COM_CD_GRP = 'CRDTPSTAT'
  LEFT OUTER JOIN HMS_CM_COMCD_MST CC2 ON CI.MBRSH_PGM_ID = CC2.MBRSH_PGM_ID AND CI.SAV_USE_FG_CD = CC2.COM_CD AND CC2.COM_CD_GRP = 'CRDPNT'
```
